if(typeof String.prototype.trim!=="function"){String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}}if(!window.console){console={log:function(a){}}}(function(a){a.fn.DataFilter=function(u,al){var aV=a.extend({enableFreeTextSearch:false,scrollToEnabled:false,scrollToAnimationEnabled:true,animationEnabled:false,useShowResultsButton:false,useApplyButton:false,pageSize:-1,filters:{},sortingDropDown:undefined,defaultTableSort:undefined,slidersEnabled:true,multiSelectLabel:"Select to add",itemsLabel:"items",itemLabel:"item",noResultsHtml:"<p>No matching items, please modify your search criteria</p>",disableIfSlow:false,slowTimeMs:500,useLoadingOverlayOnFilter:false,loadingMinTime:300,useLoadingOverlayOnFilterIfSlow:true,disableFreeTextIfSlow:true,useLoadingOverlayOnStartUp:false,extractTextFn:function(a5){return a5.text()},freeTextSearchExtractTextFn:function(a5){return a5.text()},onSuccess:function(){},onSlow:function(a5){console.log("Too slow to create filters: "+a5+"ms")},afterFilter:function(){},logFn:function(a5){console.log(a5)}},al);var a4={element:a(this),elementId:a(this).attr("id"),elementType:a(this).prop("tagName"),filtersInitialised:false,initialised:false,sort:{},paging:{currentPage:1,itemsPerPage:-1,defaultItemsPerPage:Number.MAX_VALUE,totalItems:0,numMatchedItems:0},wrapper:a(document.createElement("div")).attr("class","filterWrapper")};methods={init:function(){if(a7()){utils.wrapFunctionWithLoading(ac,aV.useLoadingOverlayOnStartUp);return this}else{utils.log("Invalid use of DataFilter - check above log messages")}function a7(){var a8=true;if(a("#filters").length==0){a8=a5("No element with id 'filters'")}if(a(".paginationHolder").length==0){a6("No .paginationHolder class elements for paging - paging will be disabled");aV.pageSize=-1}return a8}function a5(a8){utils.log(a8);return false}function a6(a8){utils.log(a8)}}};function ac(){var a6=utils.now();if(aV.enableFreeTextSearch){Z()}for(filtersIndex=0;filtersIndex<aV.filters.length;filtersIndex++){var a5=aV.filters[filtersIndex];aR(a5)}if(aV.sortingDropDown!=undefined){n(aV.sortingDropDown)}if(aV.disableIfSlow&&a4.filterCreationTime>aV.slowTimeMs){aK();aV.onSlow(a4.filterCreationTime)}else{aI();t();Q();y(aV.pageSize);aV.onSuccess()}}function aK(){if(aV.useLoadingOverlayOnFilterIfSlow){aV.useLoadingOverlay=true;aV.animationEnabled=false}if(aV.disableFreeTextIfSlow){a("freeTextSearch").remove()}}function Q(){if(!utils.exists("#noFilterResults")){a4.element.after(a("<div/>").attr("id","noFilterResults").html(aV.noResultsHtml).hide())}}function aI(){a("#filters").empty();a("#filters").append(a4.wrapper)}function t(){if(a4.elementType=="TABLE"){I()}if(aV.sortingDropDown!=undefined){P(aV.sortingDropDown)}}function aR(a6){a4.filtersInitialised=false;sortFn=x[a6.dataType];a4.sort[a6.id]=sortFn;factoryFn=ah[a6.filterType];if(a6.heading&&factoryFn&&sortFn){var a5=a6.items;if(a5==undefined){var a7=Y[a4.elementType].getAllDataForGivenIdFn(a6.id);a5=K(a7,sortFn)}if(a5.length>0){S(a6.id,a6.heading,factoryFn,a5)}else{utils.log("No items found for id '"+a6.id+"' so '"+a6.heading+"' not added as a filter")}}else{utils.log("Can not create filter for id '"+a6.id+"' so '"+a6.heading+"' with filterType '"+a6.filterType+"' and dataType '"+a6.dataType+"' not added as a filter")}}function y(a6){a4.filtersInitialised=true;a4.paging.defaultItemsPerPage=a6;f(1,a6);if(aV.useApplyButton){T("Apply Filters",J)}else{if(aV.useShowResultsButton){T("Show Results",k)}}if(aV.defaultTableSort){var a5=a("#"+a4.elementId+" thead th:nth-child("+aV.defaultTableSort.id+")");a5.click();if(aV.defaultTableSort.direction&&aV.defaultTableSort.direction=="-1"){a5.click()}}a4.initialised=true}function T(a7,a6){var a5=a(document.createElement("button")).attr({type:"button","class":"btn-style"}).click(function(){a6()}).text(a7);a4.wrapper.append(a(document.createElement("div")).append(a5))}function K(a7,a6){var a5=[];a7.each(function(){var a8=aV.extractTextFn(a(this)).trim();if(a8.length>0&&a.inArray(a8,a5)<0){a5.push(a8)}});compare.sortItems(a5,a6);return a5}function b(){return a("#"+a4.elementId+" tbody tr")}function aW(){return a("ul#"+a4.elementId+">li")}function ao(a5){return a("#"+a4.elementId+" tbody tr td:nth-child("+a5+")")}function z(a5){return a("ul#"+a4.elementId+">li ."+a5)}function q(a6,a5){return aV.extractTextFn(a(a6).children("td").eq(a5))}function ag(a6,a5){return aV.extractTextFn(a(a6).find("."+a5))}function f(a5,a6){if(a5){a4.paging.currentPage=a5}if(a4.paging.currentPage<=0){a4.paging.currentPage=1}if(a6){a4.paging.itemsPerPage=parseInt(a6)}if(a4.paging.itemsPerPage<=0){a4.paging.itemsPerPage=Number.MAX_VALUE}aL()}function aF(){if(!aV.useApplyButton){J()}}function J(){a4.paging.currentPage=1;aL()}function aL(){utils.wrapFunctionWithLoading(function(){aA()},aV.useLoadingOverlayOnFilter)}function aA(){if(!a4.filtersInitialised){return}var a6=utils.now();var a5={};a('#filters [data-role="filterSetSelector"]').each(function(){var a8=this.id.split("_")[0];var a7=this.id.split("_")[1];switch(a8){case"Select":av(a5,a7,aa(this.id));break;case"MultiSelect":av(a5,a7,h(this.id));break;case"Checkboxes":av(a5,a7,aY(this.id));break;case"CheckboxesRange":ax(a5,a7);break;case"Max":av(a5,a7,v(this.id));break;case"Min":av(a5,a7,aJ(this.id));break;case"freeTextSearch":av(a5,a7,aN(this.id));break}});aQ(r,a5);aG();ak();V();if(aV.logTiming){utils.log("filter:"+(utils.now()-a6))}aV.afterFilter()}function N(){a("body").addClass("loading");if(navigator.userAgent.match(/(iPhone|iPod|iPad)/i)){a(".modal").css("postion","absolute").css("top",(-(a("html").offset().top))+"px")}}function a3(){a("body").removeClass("loading")}function ak(){if((aV.useApplyButton&&a4.initialised)||(aV.scrollToEnabled&&a4.initialised)){k()}}function k(){var a5=utils.exists(a("#scrollTo"))?a("#scrollTo"):utils.exists(a(".paginationHolder"))?a(".paginationHolder").eq(0):a4.element;if(aV.scrollToAnimationEnabled){a("html, body").animate({scrollTop:a5.offset().top},300)}else{a("html, body").scrollTop(a5.offset().top)}}function av(a7,a6,a5){if(a7[a6]){a7[a6].push(a5)}else{a7[a6]=[a5]}}function aQ(a8,a6){var a5=0;a4.paging.totalItems=0;a4.paging.numMatchedItems=0;var a7=Y[a4.elementType].getAllDataFn();a7.each(function(){var a9=a8(this,a6);a4.paging.totalItems++;if(a9){if(aD(a5)){aV.animationEnabled?a(this).show("slow"):a(this).show();a5++}else{aV.animationEnabled?a(this).hide("slow"):a(this).hide()}a4.paging.numMatchedItems++}else{aV.animationEnabled?a(this).hide("slow"):a(this).hide()}});setTimeout(function(){O(a7)},aV.animationEnabled?330:1)}function O(a5){a5.each(function(){if(a(this).css("display")!="none"){a(this).hide().show()}})}function V(){if(a4.paging.numMatchedItems==0){a("#noFilterResults").show();a(".paginationHolder").hide()}else{a("#noFilterResults").hide();a(".paginationHolder").show()}}function aD(a5){return a4.paging.numMatchedItems>=(a4.paging.currentPage-1)*a4.paging.itemsPerPage&&a5<a4.paging.itemsPerPage}function r(a8,a7,a6){var a5=true;a.each(a7,function(a9,ba){if(a4.elementType=="TABLE"){a9=parseInt(a9)-1}a.each(ba,function(bb){if(a5){a5=E(a8,a9,ba[bb])}});if(!a5){return false}});if(aV.enableFreeTextSearch&&a("#freeTextSearch").val().trim()!=""&&a5){a5=ab(aV.freeTextSearchExtractTextFn(a(a8)),aB(a("#freeTextSearch").val().trim()))}return a5}function aB(a7){var a5="";var a6=a7.split(" ");for(i=0;i<a6.length;i++){a5+="(?=.*"+a6[i]+")"}return a5}function E(a8,a5,a7){var a6=Y[a4.elementType].extractTextFn(a8,a5);if(utils.startsWith(a7,"--MAX--")||utils.startsWith(a7,"--MIN--")){return az(a5,a6,a7)}else{if(utils.startsWith(a7,"--RANGE--")){return d(a5,a6,a7)}else{return ab(a6,a7)}}}function ab(a6,a5){return utils.convertToSingleLine(a6).search(new RegExp(a5,"i"))>-1}function d(a6,a8,a5){var a9=false;var a7=a5.split("--RANGE--_");for(i=0;i<a7.length;i++){if(a7[i].trim().length>0){a9=a9||aZ(a6,a8,a7[i])}}return a9}function aZ(a8,a9,a7){a7=utils.replaceAll(a7,"up to ","£0 - ");var a6=a7.split(" - ");if(a6.length==1){a6[1]=a6[0]}var ba=a0(a8);var a5=ba(a6[0],a9,-1)>=0&&ba(a6[1],a9,1)>=0;return a5}function az(a6,a9,a8){var a7=a8.split("_")[1];var bb=a0(a6);var ba=utils.contains(a8,"--MAX--_")?1:-1;var a5=utils.contains(a7,"No M")?true:bb(a7,a9,ba)>=0;return a5}function aN(a5){return aB(a("#"+a5).val().trim())}function an(a5){return[v("Max_"+a5),aJ("Min_"+a5)]}function v(a5){return aC(a5,"--MAX--_")}function aJ(a5){return aC(a5,"--MIN--_")}function aC(a6,a5){return a5+a("select#"+a6+">option:selected").val()}function aa(a5){return a("select#"+a5+" option:selected").prop("value")}function h(a6){var a5="";a6=a6.split("_")[1];a("#MultiSelectItems_"+a6+" p").each(function(){a5+=aP(a5,a(this).text())});return a5}function aY(a6){var a5="";a("ul#"+a6+" li input[type=checkbox]").each(function(){if(a(this).prop("checked")&&a(this).prop("name")!="All"){a5+=aP(a5,a(this).prop("name"))}});return a5}function ax(a7,a5){var a6="";a("ul#CheckboxesRange_"+a5+" li input[type=checkbox]").each(function(){if(a(this).prop("checked")&&a(this).prop("name")!="All"){a6+="--RANGE--_"+a(this).parent().text()}});av(a7,a5,a6)}function aP(a5,a7){var a6=m(a7);return(a5==""?a6:"|"+a6)}function m(a5){return(utils.startsWith(a5,"~"))?a5.substring(1):L(a5)}function L(a5){return"\\b"+utils.extractCurrencyValue(a5)+"\\b"}function S(a6,a8,a7,a5){aX(a8,a7(a5,a6))}function aX(a8,a7,a6){var a5=a(document.createElement("div")).attr({"class":"filterSet"});a5.append(a(document.createElement("a")).attr({"class":"filterSelect"}).text(a8));a5.append(aT(a7));if(a6){a4.wrapper.prepend(a5)}else{a4.wrapper.append(a5)}}function aT(a6,a5){return a6.attr({id:a5,"class":"filterContent"})}function Z(){aX("Search",a("<div>").append(ad()))}function ad(a6){var a5="freeTextSearch";if(a6){a5+="_"+a6}return a("<input/>").attr({type:"search",id:a5,placeholder:"type to search"}).keyup(function(){J()}).click(function(){J()})}function C(a5,a6){return ad(a6).attr({"data-role":"filterSetSelector"})}function aE(a5,a6){return ay(A(a5),a6)}function aj(a5,a7){var a6=aS(A(a5));return X(a6,a7)}function M(a5,a7){var a6=A(a5);var ba=[];for(i=0;i<a6.length;i++){if(i==0){if(a6[i]=="Free"){ba.push(a6[i])}else{ba.push("up to "+a6[i])}}else{ba.push(a6[i-1]+" - "+a6[i])}}var a9=utils.now();var a8=at(a7,a5,ba);return au(a8,a7,"Range")}function aS(a5){if(a5.length>1){a5.pop()}return a5}function at(a7,a6,a9){var a8=[];var a5=a9[0];for(i=0;i<a9.length;i++){if(ae(a7,a9[i],a6)==-1){if(i<a9.length-1){a5=a5.split(" - ")[0]+" - "+a9[i+1].split(" - ")[1]}}else{if(utils.startsWith(a5,"Free -")){a5=a5.replace("Free -","up to ")}a8.push(a5);if(i<a9.length-1){a5=a9[i+1]}}}return a8}function ae(a7,a6,a5){if(a4.elementType=="TABLE"){a7=parseInt(a7)-1}for(j=0;j<a5.length;j++){if(aZ(a7,a5[j],a6)){return j}}return -1}function A(a8){var a6=utils.extractCurrencyValue(a8[0]);var bc=utils.extractCurrencyValue(a8[a8.length-1]);var a7=parseInt(bc)-parseInt(a6);var ba=10;if(a7>1750){ba=500}else{if(a7>750){ba=250}else{if(a7>350){ba=100}else{if(a7>175){ba=50}else{if(a7>75){ba=25}else{if(a7>60){ba=20}}}}}}var a5=parseInt(a7/ba)+1;var bb=(a6-(a6%ba))+ba;if((a5-1)*ba+bb<bc){a5++}var a9=[];if(a6==0){a9.push("Free");bb=bb+ba}for(i=0;i<a5;i++){a9.push("£"+(bb+i*ba))}return a9}function e(a5,a8){var a6=a(document.createElement("ul")).attr({id:"MaxMin_"+a8,"class":"MaxMin"});a6.append(H(ar(a8,"Min","From: ").addClass("forSlider"),ap(a5,a8,"Min",aw("Min",a8)).addClass("forSlider")));a6.append(H(ar(a8,"Max","Up to: ").addClass("forSlider"),ap(a5,a8,"Max",aw("Max",a8)).addClass("forSlider")));var a7=a(document.createElement("div"));a2(a7,a5,a8,"MaxMin");a7.append(a6);return a7}function H(a6,a5){return a(document.createElement("li")).append(a6).append(a5)}function ay(a5,a6){return am(a5,a6,"Max","Up to: ")}function X(a5,a6){return am(a5,a6,"Min","From: ")}function am(a6,a9,a7,a5){var a8=a(document.createElement("div"));a2(a8,a6,a9,a7);a8.append(ar(a9,a7,a5).addClass("forSlider"));a8.append(ap(a6,a9,a7,aw(a7,a9)).addClass("forSlider"));return a8}function aw(a6,a7){return function a5(a8){aM(a7,a8.value);a1(a6+"_"+a7,a8.selectedIndex)}}function D(a5,a8){function a6(a9){if(a9.value!=aV.multiSelectLabel){var ba="#MultiSelectItems_"+a8;a(ba).append(a(document.createElement("p")).text(a9.value).prop("class",a9.selectedIndex).click(function(){var bb=a(this).text();a(a9).append(a(document.createElement("option")).prop("value",bb).text(bb));B(a(a9));a(this).remove();aF()}));a(a9).find("option:selected").remove()}}var a7=a(document.createElement("div"));a7.append(ar(a8,"MultiSelect",""));a7.append(ap(a5,a8,"MultiSelect",a6));a7.append(a(document.createElement("div")).attr({id:"MultiSelectItems_"+a8,"class":"multiSelect"}));return a7}function af(a5){if(a4[a5.prop("id")]==undefined){a4[a5.prop("id")]=a5.width()}return a4[a5.prop("id")]}function B(a5){var a6=a5.val();a5.html(a("option",a5).sort(function(a8,a7){if(a8.text==aV.multiSelectLabel){return -1}if(a7.text==aV.multiSelectLabel){return 1}return a8.text==a7.text?0:a8.text<a7.text?-1:1}));a5.val(a6)}function l(a5,a7){var a6=a(document.createElement("div"));a6.append(ar(a7,"Select",""));a6.append(ap(a5,a7,"Select"));return a6}function ap(a6,a9,a8,a7){if(a8==undefined){a8="Select"}a9=a8+"_"+a9;var a5=a(document.createElement("select")).attr({id:a9,"data-role":"filterSetSelector"});if(a8=="Min"){a5.append(a(document.createElement("option")).text("No Min"))}if(a8=="Select"){a5.append(a(document.createElement("option")).text("All").prop("value",""))}if(a8=="MultiSelect"){a5.append(a(document.createElement("option")).text(aV.multiSelectLabel).prop("value",""))}a.each(a6,function(bb,ba){a5.append(a(document.createElement("option")).prop("value",ba).text(ba))});a5.change(function(ba){if(a7){a7(this)}aF()});if(a8=="Max"){a5.append(a(document.createElement("option")).attr({selected:true}).text("No Max"))}return a5}function ar(a7,a6,a5){return a(document.createElement("label")).attr({id:"selectLabel_"+a6+"_"+a7,"class":"selectLabel"}).text(a5)}function a2(bb,a5,ba,a7){if(!aV.slidersEnabled){return bb}ba=a7+"_"+ba;var a6=(a7=="MaxMin")?2:1;var a9=a(document.createElement("div")).attr({id:"slider_"+ba,"class":"noUiSlider"});a9.noUiSlider("init",{handles:a6,scale:[0,a5.length],start:[0,a5.length],change:function(){var bc=a(this).noUiSlider("value");G(ba,bc);aM(ba,R(ba,bc))},end:function(){aF()}});var a8=a(document.createElement("div")).attr({id:"sliderLabel_"+ba,"class":"noUiSliderLabel"}).text("-");bb.append(a8);bb.append(a9);if(a7=="Min"){setTimeout(function(){a1(ba,0)},0)}if(a7=="Max"){setTimeout(function(){a1(ba,a5.length)},0)}if(a7=="MaxMin"){setTimeout(function(){a1(ba,a5.length)},0)}return bb}function G(a6,a5){if(utils.contains(a6,"MaxMin")){a6=a6.split("_")[1];a("select#Min_"+a6+" option:eq("+a5[0]+")").attr("selected","selected");a("select#Max_"+a6+" option:eq("+a5[1]+")").attr("selected","selected")}else{a("select#"+a6+" option:eq("+a5[1]+")").attr("selected","selected")}}function R(a9,a5){if(utils.contains(a9,"MaxMin")){a9=a9.split("_")[1];var a8=a("select#Min_"+a9+" option:eq("+a5[0]+")").text().trim();var a7=a("select#Max_"+a9+" option:eq("+a5[1]+")").text().trim();return F(a8,a7)}else{var a6=a("select#"+a9+" option:eq("+a5[1]+")").text();var a8=(utils.contains(a9,"Max"))?"No Min":a6;var a7=(utils.contains(a9,"Min"))?"No Max":a6;return F(a8,a7)}}function F(a6,a5){if(a6=="No Min"&&a5=="No Max"){return"Show All"}else{if(a5=="No Max"){return"From "+a6}else{if(a6=="No Min"){return"Up to "+a5}else{return a6+" to "+a5}}}}function aM(a6,a5){if(utils.exists("#sliderLabel_"+a6)){a("#sliderLabel_"+a6).text(a5)}}function a1(a7,a6){if(utils.exists("#slider_"+a7)){var a5=(utils.contains(a7,"MaxMin"))?"1":"0";a("#slider_"+a7).noUiSlider("move",{knob:a5,to:a6,surpressChange:true})}else{var a5=(utils.contains(a7,"Max"))?"1":"0";a7=a7.split("_")[1];if(utils.exists("#slider_MaxMin_"+a7)){a("#slider_MaxMin_"+a7).noUiSlider("move",{knob:a5,to:a6,surpressChange:true})}}}function au(a5,a6,a8){var a9=(a8)?"Checkboxes"+a8+"_"+a6:"Checkboxes_"+a6;var a7=a(document.createElement("ul")).attr({id:a9,"data-role":"filterSetSelector"});a7.append(aH("All",a6,true,function(){a.each(a("ul#"+a9+' input[type="checkbox"]'),function(ba,bb){W(a9,true);if(ba>0){a(bb).prop("checked",false)}});aF()}));a.each(a5,function(bb,ba){a7.append(aH(ba,a9,false,function(bc){W(a9,false);aF()}))});return a7}function W(a6,a5){a("ul#"+a6+' input[type="checkbox"]').eq(0).prop("checked",a5)}function aH(a7,a5,a6,a8){return a(document.createElement("li")).attr({"class":"checkboxLi"}).append(p(a7).prepend(aq(a7,a5,a6,a8)))}function aq(a7,a5,a6,a8){return a(document.createElement("input")).attr({id:a5+"_"+a7,"class":"filterCheckbox",name:a7,value:a7,type:"checkbox",checked:a6}).click(a8)}function p(a5){a5=utils.startsWith(a5,"~")?a5.substring(1):a5;return a(document.createElement("label")).text(a5)}function aG(){a(".paginationHolder").each(function(){a(this).empty().append(c())})}function c(){var a5=U();if(aV.pageSize>0&&a4.paging.numMatchedItems>a4.paging.itemsPerPage){aU(a5)}if(aV.pageSize>0){aO(a5)}return a5}function U(){var a8=((a4.paging.currentPage-1)*a4.paging.itemsPerPage)+1;var a7=((a4.paging.currentPage)*a4.paging.itemsPerPage);if(a7>a4.paging.numMatchedItems){a7=a4.paging.numMatchedItems}var a5=a(document.createElement("ul")).attr({"class":"pagination"});var a6="Showing ";if(aV.pageSize>0){a6+=a8+" - "+a7+" of "}a6+=a4.paging.numMatchedItems+" "+((a4.paging.numMatchedItems==1)?aV.itemLabel:aV.itemsLabel);if(a4.paging.numMatchedItems<a4.paging.totalItems){a6+="<span class='totalItems'> (filtered from "+a4.paging.totalItems+")</span>"}return a5.append(a(document.createElement("li")).attr({"class":"showing"}).html(a6))}function aO(a5){if(a4.paging.numMatchedItems>a4.paging.itemsPerPage){s(a5,"Show All",1,-1)}else{if(a4.paging.defaultItemsPerPage>0&&a4.paging.itemsPerPage>a4.paging.defaultItemsPerPage){s(a5,"First Page",1,a4.paging.defaultItemsPerPage)}}}function aU(a7){var a6=parseInt((a4.paging.numMatchedItems/a4.paging.itemsPerPage)+((a4.paging.numMatchedItems%a4.paging.itemsPerPage>0)?1:0));var a9=(a4.paging.currentPage>1)?a4.paging.currentPage-1:1;var a8=(a4.paging.currentPage<a6)?a4.paging.currentPage+1:a6;if(a8>a6){a8=a6}g(a7,"&laquo;","Skip to first page",1);g(a7,"&lsaquo;","Skip to previous page",a9);for(i=1;i<=a6;i++){var a5=a(document.createElement("li")).addClass("pageNumber");if(i==a4.paging.currentPage){a5.addClass("active")}a7.append(a5.append(a(document.createElement("a")).text(i).click(function(ba){f(a(this).text());k()})))}g(a7,"&rsaquo;","Skip to next page",a8);g(a7,"&raquo;","Skip to last page",a6)}function s(a6,a8,a7,a5){a6.append(a(document.createElement("li")).append(a(document.createElement("a")).addClass("pagingShow").text(a8).click(function(a9){f(a7,a5);k()})))}function g(a6,a8,a5,a7){a6.append(a(document.createElement("li")).prop("class","pageNumber").append(a(document.createElement("a")).click(function(a9){f(a7);k()}).html(a8)))}function a0(a5){if(a.isNumeric(a5)){a5=parseInt(a5)+1}return a4.sort[a5]}function n(a6){var a5=a(document.createElement("select")).attr({id:"sortBySelect"});a5.append(a(document.createElement("option")).prop("value","sortBy").text("Sort by"));for(sortConfigIndex=0;sortConfigIndex<a6.length;sortConfigIndex++){var a8=a6[sortConfigIndex];if(a4.sort[a8.id]!=undefined){var a7=a8.id+"_"+a8.direction;a5.append(a(document.createElement("option")).prop("value",a7).text(a8.heading))}else{utils.log("Sort function not defined for id '"+a8.id+"' so not adding '"+a8.heading+"' to sorting dropdown")}}a5.change(function(ba){var a9=a("select#sortBySelect>option:selected").val();if(a9!="sortBy"){w(a4.element,Y[a4.elementType].getAllDataFn(),a9.split("_")[0],a9.split("_")[1])}});aX("Sort by",a5,true)}function P(a5){var a6=1;a.each(a5,function(a7,a8){if(a8.isDefault){w(a4.element,Y[a4.elementType].getAllDataFn(),a8.id,a8.direction);a("#sortBySelect option:eq("+a6+")").attr("selected","selected")}a6++})}function I(){a("#tariffTable thead th").each(function(a5){if(a0(a5)){ai(a(this),a5)}})}function ai(a6,a5){if(!utils.contains(a6.attr("class"),"sorting")||utils.contains(a6.attr("class"),"sortable")){return}a6.addClass("sortable").click(function(){var a7=a("#tariffTable tbody tr").get();var a9=a6.is(".sorted-asc")?-1:1;w(a("#tariffTable tbody"),a7,a5,a9);a("th").removeClass("sorted-asc sorted-desc");var a8=a("th").filter(":nth-child("+(a5+1)+")");a9==1?a8.addClass("sorted-asc"):a8.addClass("sorted-desc");a("td").removeClass("sorted").filter(":nth-child("+(a5+1)+")").addClass("sorted")})}function w(a8,a6,a5,a7){o(a8,a6,a5,a7);f(1)}function o(a8,a6,a5,a7){a.each(a6,function(ba,a9){a9.sortKey=Y[a4.elementType].extractTextFn(a9,a5)});a6.sort(function(ba,a9){var bb=a0(a5);return bb(ba.sortKey,a9.sortKey,a7)});a.each(a6,function(ba,a9){a8.append(a9);a9.sortKey=null})}compare={sortItems:function(a5,a7,a6){if(a6==undefined){a6=1}if(typeof a7=="string"){a7=compare[a7]}a5.sort(function(a9,a8){return a7(a9,a8,a6)});return a5},compareAmount:function(a6,a5,a7){return compare.compare(compare.convertAmount(a6),compare.convertAmount(a5),a7)},comparePeriod:function(a6,a5,a7){return compare.compare(compare.convertPeriod(a6),compare.convertPeriod(a5),a7)},compareCurrency:function(a6,a5,a7){return compare.compare(parseFloat(utils.extractCurrencyValue(a6)),parseFloat(utils.extractCurrencyValue(a5)),a7)},compare:function(a6,a5,a7){if(!a7){a7=1}return((a6<a5)?-a7:((a6>a5)?a7:0))},strPad:function(a6,a5,a7){var a8=a6.toString().trim();if(!a7){a7="0"}while(a8.length<a5){a8=a7+a8}return a8},convertAmount:function(a5){var a5=a5.replace("GB","000000").replace("MB","000");if(!utils.containsNumber(a5)){a5=(a5=="Unlimited")?Number.MAX_VALUE:"0"}return compare.strPad(a5,10)},convertPeriod:function(a5){var a5=a5.toUpperCase().replace(" DAYS","").replace(" MONTHS","00");return compare.strPad(a5,10)}};utils={extractCurrencyValue:function(a6){if(a6==undefined){return""}var a5=a6.trim();if(a6.indexOf("£")!=-1){return utils.replaceAll(a5,"£","")}else{if(a5=="Free"||a5==""){return"0"}else{return a6}}},substringAfterLast:function(a6,a5){return(a6.indexOf(a5)>-1)?a6.substring(a6.lastIndexOf(a5)+1):""},contains:function(a5,a6){return(a5)&&a5.indexOf(a6)!=-1},exists:function(a5){return a(a5).length>0},now:function(){return new Date().getTime()},replaceAll:function(a5,a6,a7){return a5.replace(new RegExp(a6,"g"),a7)},convertToSingleLine:function(a5){return a5.replace(/(\r\n|\n|\r)/gm," ")},startsWith:function(a5,a6){return a5.indexOf(a6)==0},containsNumber:function(a5){return/\d/.test(a5)},isAlphaNumeric:function(a5){return(a5.match(/^[0-9a-zA-Z ]+$/))?true:false},substringBeforeFirst:function(a7,a6){var a5=a7.indexOf(a6);return(a5>-1)?a7.substring(0,a5):a7},log:function(a5){aV.logFn(a5)},wrapFunctionWithLoading:function(a5,a6){if(a6){N();setTimeout(function(){var a9=utils.now();try{a5()}catch(a8){a3();utils.log(a8.message);utils.log(a8.stack)}var a7=utils.now()-a9;if(a7<aV.loadingMinTime){setTimeout(a3,aV.loadingMinTime-a7)}else{a3()}},1)}else{a5()}}};var x={"default":compare.compare,amount:compare.compareAmount,currency:compare.compareCurrency,period:compare.comparePeriod};var ah={select:l,multiSelect:D,checkboxes:au,min:X,max:ay,minMax:e,minWithBanding:aj,maxWithBanding:aE,rangeBanding:M,search:C};var Y={TABLE:{getAllDataFn:b,getAllDataForGivenIdFn:ao,extractTextFn:q},UL:{getAllDataFn:aW,getAllDataForGivenIdFn:z,extractTextFn:ag}};if(methods[u]){return methods[u].apply(this,Array.prototype.slice.call(arguments,1))}else{if(utils[u]){return utils[u].apply(this,Array.prototype.slice.call(arguments,1))}else{if(compare[u]){return compare[u].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof u==="object"||!u){return methods.init.apply(this,arguments)}else{a.error("No such method: "+u)}}}}}})(jQuery);