if(typeof String.prototype.trim!=="function"){String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}}if(!window.console){console={log:function(a){alert(a)}}}(function(a){a.fn.DataFilter=function(v,ak){var aS=a.extend({enableFreeTextSearch:false,scrollToEnabled:false,animationEnabled:false,useShowResultsButton:false,useApplyButton:false,pageSize:-1,filters:{},sortingDropDown:undefined,defaultTableSort:undefined,slidersEnabled:true,multiSelectLabel:"Select to add",itemsLabel:"items",itemLabel:"item",noResultsHtml:"<p>No matching items, please modify your search criteria</p>",disableIfSlow:false,slowTimeMs:1000,useLoadingOverlayOnFilter:false,loadingMinTime:300,useLoadingOverlayOnFilterIfSlow:true,disableFreeTextIfSlow:true,useLoadingOverlayOnStartUp:false,extractTextFn:function(a2){return a2.text()},onSuccess:function(){},onSlow:function(a2){console.log("Too slow to create filters: "+a2+"ms")},afterFilter:function(){}},ak);var a1={element:a(this),elementId:a(this).attr("id"),elementType:a(this).prop("tagName"),elementIds:{},filtersInitialised:false,initialised:false,sort:{},paging:{currentPage:1,itemsPerPage:-1,defaultItemsPerPage:Number.MAX_VALUE,totalItems:0,numMatchedItems:0},wrapper:a(document.createElement("div")).attr("class","filterWrapper")};methods={init:function(){if(a4()){utils.wrapFunctionWithLoading(ac,aS.useLoadingOverlayOnStartUp);return this}else{console.log("Invalid use of DataFilter - check above log messages")}function a4(){var a5=true;if(a("#filters").length==0){a5=a2("No element with id 'filters'")}if(a(".paginationHolder").length==0){a3("No .paginationHolder class elements for paging - paging will be disabled");aS.pageSize=-1}return a5}function a2(a5){console.log(a5);return false}function a3(a5){console.log(a5)}}};function ac(){var a3=utils.now();if(aS.enableFreeTextSearch){Z()}for(filtersIndex=0;filtersIndex<aS.filters.length;filtersIndex++){var a2=aS.filters[filtersIndex];if(a1.elementIds[a2.id]){console.log("Duplicate id ["+a2.id+"] - can only create single filter by ID - all but first being ignored")}else{a1.elementIds[a2.id]=a2.id;aO(a2)}}if(aS.sortingDropDown!=undefined){n(aS.sortingDropDown)}a1.filterCreationTime=utils.now()-a3;console.log(a1.filterCreationTime);if(aS.disableIfSlow&&a1.filterCreationTime>aS.slowTimeMs){aJ();aS.onSlow(a1.filterCreationTime)}else{aH();u();Q();z(aS.pageSize);console.log(utils.now()-a3);aS.onSuccess()}}function aJ(){if(aS.useLoadingOverlayOnFilterIfSlow){aS.useLoadingOverlay=true}if(aS.disableFreeTextIfSlow){a("freeTextSearch").remove()}}function Q(){if(!utils.exists("#noFilterResults")){a1.element.after(a("<div/>").attr("id","noFilterResults").html(aS.noResultsHtml).hide())}}function aH(){a("#filters").empty();a("#filters").append(a1.wrapper)}function u(){if(a1.elementType=="TABLE"){I()}if(aS.sortingDropDown!=undefined){P(aS.sortingDropDown)}}function aO(a3){a1.filtersInitialised=false;sortFn=y[a3.dataType];a1.sort[a3.id]=sortFn;factoryFn=ag[a3.filterType];if(a3.heading&&factoryFn&&sortFn){var a2=a3.items;if(a2==undefined){var a4=Y[a1.elementType].getAllDataForGivenIdFn(a3.id);a2=K(a4,sortFn)}if(a2.length>0){S(a3.id,a3.heading,factoryFn,a2)}else{console.log("No items found for id '"+a3.id+"' so '"+a3.heading+"' not added as a filter")}}else{console.log("Can not create filter for id '"+a3.id+"' so '"+a3.heading+"' with filterType '"+a3.filterType+"' and dataType '"+a3.dataType+"' not added as a filter")}}function z(a3){a1.filtersInitialised=true;a1.paging.defaultItemsPerPage=a3;f(1,a3);if(aS.useApplyButton){T("Apply Filters",t)}else{if(aS.useShowResultsButton){T("Show Results",k)}}if(aS.defaultTableSort){var a2=a("#"+a1.elementId+" thead th:nth-child("+aS.defaultTableSort.id+")");a2.click();if(aS.defaultTableSort.direction&&aS.defaultTableSort.direction=="-1"){a2.click()}}a1.initialised=true}function T(a4,a3){var a2=a(document.createElement("button")).attr({type:"button","class":"btn-style"}).click(function(){a3()}).text(a4);a1.wrapper.append(a(document.createElement("div")).append(a2))}function K(a4,a3){var a2=[];a4.each(function(){var a5=aS.extractTextFn(a(this)).trim();if(a5.length>0&&a.inArray(a5,a2)<0){a2.push(a5)}});compare.sortItems(a2,a3);return a2}function b(){return a("#"+a1.elementId+" tbody tr")}function aT(){return a("ul#"+a1.elementId+">li")}function an(a2){return a("#"+a1.elementId+" tbody tr td:nth-child("+a2+")")}function A(a2){return a("ul#"+a1.elementId+">li ."+a2)}function q(a3,a2){return aS.extractTextFn(a(a3).children("td").eq(a2))}function ae(a3,a2){return aS.extractTextFn(a(a3).find("."+a2))}function f(a2,a3){if(a2){a1.paging.currentPage=a2}if(a1.paging.currentPage<=0){a1.paging.currentPage=1}if(a3){a1.paging.itemsPerPage=parseInt(a3)}if(a1.paging.itemsPerPage<=0){a1.paging.itemsPerPage=Number.MAX_VALUE}t()}function aE(){if(!aS.useApplyButton){J()}}function J(){utils.wrapFunctionWithLoading(function(){a1.paging.currentPage=1;t()},aS.useLoadingOverlayOnFilter)}function t(){if(!a1.filtersInitialised){return}var a3=utils.now();var a2={};a('#filters [data-role="filterSetSelector"]').each(function(){var a5=this.id.split("_")[0];var a4=this.id.split("_")[1];switch(a5){case"Select":av(a2,a4,aa(this.id));break;case"MultiSelect":av(a2,a4,h(this.id));break;case"Checkboxes":av(a2,a4,aV(this.id));break;case"CheckboxesRange":ax(a2,a4);break;case"Max":av(a2,a4,w(this.id));break;case"Min":av(a2,a4,aI(this.id));break}});aN(r,a2);aF();aj();V();console.log("doFilter: "+(utils.now()-a3));aS.afterFilter()}function N(){a("body").addClass("loading")}function a0(){a("body").removeClass("loading")}function aj(){if((aS.useApplyButton&&a1.initialised)||(aS.scrollToEnabled&&a1.initialised)){k()}}function k(){var a2=utils.exists(a("#scrollTo"))?a("#scrollTo"):a1.element;a("html, body").animate({scrollTop:a2.offset().top},300)}function ao(){if(utils.exists(a("#scrollTo"))){k()}else{if(utils.exists(a(".paginationHolder").eq(0))){if(a(window).scrollTop()>a(".paginationHolder").eq(0).offset().top){a("html, body").scrollTop(a(".paginationHolder").eq(0).offset().top)}}}}function av(a4,a3,a2){if(a4[a3]){a4[a3].push(a2)}else{a4[a3]=[a2]}}function aN(a5,a3){var a2=0;a1.paging.totalItems=0;a1.paging.numMatchedItems=0;var a4=Y[a1.elementType].getAllDataFn();var a6=utils.now();a4.each(function(){var a7=a5(this,a3);a1.paging.totalItems++;if(a7){if(aC(a2)){aS.animationEnabled?a(this).show("slow"):a(this).show();a2++}else{aS.animationEnabled?a(this).hide("slow"):a(this).hide()}a1.paging.numMatchedItems++}else{aS.animationEnabled?a(this).hide("slow"):a(this).hide()}});setTimeout(function(){O(a4)},aS.animationEnabled?330:1)}function O(a2){a2.each(function(){if(a(this).css("display")!="none"){a(this).hide().show()}})}function V(){if(a1.paging.numMatchedItems==0){a("#noFilterResults").show();a(".paginationHolder").hide()}else{a("#noFilterResults").hide();a(".paginationHolder").show()}}function aC(a2){return a1.paging.numMatchedItems>=(a1.paging.currentPage-1)*a1.paging.itemsPerPage&&a2<a1.paging.itemsPerPage}function r(a5,a4,a3){var a2=true;a.each(a4,function(a6,a7){if(a1.elementType=="TABLE"){a6=parseInt(a6)-1}a.each(a7,function(a8){if(a2){a2=E(a5,a6,a7[a8])}});if(!a2){return false}});if(aS.enableFreeTextSearch&&a("#freeTextSearch").val().trim()!=""&&a2){a2=ab(a(a5).text().replace(/(\r\n|\n|\r)/gm," "),aA(a("#freeTextSearch").val().trim()))}return a2}function aA(a4){var a2="";var a3=a4.split(" ");for(i=0;i<a3.length;i++){a2+="(?=.*"+a3[i]+")"}return a2}function E(a5,a2,a4){var a3=Y[a1.elementType].extractTextFn(a5,a2);if(utils.startsWith(a4,"--MAX--")||utils.startsWith(a4,"--MIN--")){return az(a2,a3,a4)}else{if(utils.startsWith(a4,"--RANGE--")){return d(a2,a3,a4)}else{return ab(a3,a4)}}}function ab(a3,a2){return a3.search(new RegExp(a2,"i"))>-1}function d(a3,a5,a2){var a6=false;var a4=a2.split("--RANGE--_");for(i=0;i<a4.length;i++){if(a4[i].trim().length>0){a6=a6||aW(a3,a5,a4[i])}}return a6}function aW(a5,a6,a4){a4=utils.replaceAll(a4,"up to ","£0 - ");var a3=a4.split(" - ");if(a3.length==1){a3[1]=a3[0]}var a7=aX(a5);var a2=a7(a3[0],a6,-1)>=0&&a7(a3[1],a6,1)>=0;return a2}function az(a3,a6,a5){var a4=a5.split("_")[1];var a8=aX(a3);var a7=utils.contains(a5,"--MAX--_")?1:-1;var a2=utils.contains(a4,"No M")?true:a8(a4,a6,a7)>=0;return a2}function am(a2){return[w("Max_"+a2),aI("Min_"+a2)]}function w(a2){return aB(a2,"--MAX--_")}function aI(a2){return aB(a2,"--MIN--_")}function aB(a3,a2){return a2+a("select#"+a3+">option:selected").val()}function aa(a2){return a("select#"+a2+" option:selected").prop("value")}function h(a3){var a2="";a3=a3.split("_")[1];a("#MultiSelectItems_"+a3+" p").each(function(){a2+=aM(a2,a(this).text())});return a2}function aV(a3){var a2="";a("ul#"+a3+" li input[type=checkbox]").each(function(){if(a(this).prop("checked")&&a(this).prop("name")!="All"){a2+=aM(a2,a(this).prop("name"))}});return a2}function ax(a4,a2){var a3="";a("ul#CheckboxesRange_"+a2+" li input[type=checkbox]").each(function(){if(a(this).prop("checked")&&a(this).prop("name")!="All"){a3+="--RANGE--_"+a(this).parent().text()}});av(a4,a2,a3)}function aM(a2,a4){var a3=m(a4);return(a2==""?a3:"|"+a3)}function m(a2){return(utils.startsWith(a2,"~"))?a2.substring(1):L(a2)}function L(a2){return"\\b"+utils.extractCurrencyValue(a2)+"\\b"}function S(a3,a5,a4,a2){aU(a5,a4(a2,a3))}function aU(a5,a4,a3){var a2=a(document.createElement("div")).attr({"class":"filterSet"});a2.append(a(document.createElement("a")).attr({"class":"filterSelect"}).text(a5));a2.append(aQ(a4));if(a3){a1.wrapper.prepend(a2)}else{a1.wrapper.append(a2)}}function aQ(a3,a2){return a3.attr({id:a2,"class":"filterContent"})}function Z(){aU("Search",a("<div>").append(a("<input/>").attr({type:"search",id:"freeTextSearch",placeholder:"type to search"}).keyup(function(){J()}).click(function(){J()})))}function aD(a2,a3){return ay(B(a2),a3)}function ai(a2,a4){var a3=aP(B(a2));return X(a3,a4)}function M(a2,a4){var a3=B(a2);var a7=[];for(i=0;i<a3.length;i++){if(i==0){if(a3[i]=="Free"){a7.push(a3[i])}else{a7.push("up to "+a3[i])}}else{a7.push(a3[i-1]+" - "+a3[i])}}var a6=utils.now();var a5=at(a4,a2,a7);return au(a5,a4,"Range")}function aP(a2){if(a2.length>1){a2.pop()}return a2}function at(a4,a3,a6){var a5=[];var a2=a6[0];for(i=0;i<a6.length;i++){if(ad(a4,a6[i],a3)==-1){if(i<a6.length-1){a2=a2.split(" - ")[0]+" - "+a6[i+1].split(" - ")[1]}}else{if(utils.startsWith(a2,"Free -")){a2=a2.replace("Free -","up to ")}a5.push(a2);if(i<a6.length-1){a2=a6[i+1]}}}return a5}function ad(a4,a3,a2){if(a1.elementType=="TABLE"){a4=parseInt(a4)-1}for(j=0;j<a2.length;j++){if(aW(a4,a2[j],a3)){return j}}return -1}function B(a5){var a3=utils.extractCurrencyValue(a5[0]);var a9=utils.extractCurrencyValue(a5[a5.length-1]);var a4=parseInt(a9)-parseInt(a3);var a7=10;if(a4>1750){a7=500}else{if(a4>750){a7=250}else{if(a4>350){a7=100}else{if(a4>175){a7=50}else{if(a4>75){a7=25}else{if(a4>60){a7=20}}}}}}var a2=parseInt(a4/a7)+1;var a8=(a3-(a3%a7))+a7;if((a2-1)*a7+a8<a9){a2++}var a6=[];if(a3==0){a6.push("Free");a8=a8+a7}for(i=0;i<a2;i++){a6.push("£"+(a8+i*a7))}return a6}function e(a2,a5){var a3=a(document.createElement("ul")).attr({id:"MaxMin_"+a5,"class":"MaxMin"});a3.append(H(ar(a5,"Min","From: ").addClass("forSlider"),ap(a2,a5,"Min",aw("Min",a5)).addClass("forSlider")));a3.append(H(ar(a5,"Max","Up to: ").addClass("forSlider"),ap(a2,a5,"Max",aw("Max",a5)).addClass("forSlider")));var a4=a(document.createElement("div"));aZ(a4,a2,a5,"MaxMin");a4.append(a3);return a4}function H(a3,a2){return a(document.createElement("li")).append(a3).append(a2)}function ay(a2,a3){return al(a2,a3,"Max","Up to: ")}function X(a2,a3){return al(a2,a3,"Min","From: ")}function al(a3,a6,a4,a2){var a5=a(document.createElement("div"));aZ(a5,a3,a6,a4);a5.append(ar(a6,a4,a2).addClass("forSlider"));a5.append(ap(a3,a6,a4,aw(a4,a6)).addClass("forSlider"));return a5}function aw(a3,a4){return function a2(a5){aK(a4,a5.value);aY(a3+"_"+a4,a5.selectedIndex)}}function D(a2,a5){function a3(a6){if(a6.value!=aS.multiSelectLabel){var a7="#MultiSelectItems_"+a5;a(a7).append(a(document.createElement("p")).text(a6.value).prop("class",a6.selectedIndex).click(function(){var a8=a(this).text();a(a6).append(a(document.createElement("option")).prop("value",a8).text(a8));C(a(a6));a(this).remove();aE()}));a(a6).find("option:selected").remove()}}var a4=a(document.createElement("div"));a4.append(ar(a5,"MultiSelect",""));a4.append(ap(a2,a5,"MultiSelect",a3));a4.append(a(document.createElement("div")).attr({id:"MultiSelectItems_"+a5,"class":"multiSelect"}));return a4}function af(a2){if(a1[a2.prop("id")]==undefined){a1[a2.prop("id")]=a2.width()}return a1[a2.prop("id")]}function C(a2){var a3=a2.val();a2.html(a("option",a2).sort(function(a5,a4){if(a5.text==aS.multiSelectLabel){return -1}if(a4.text==aS.multiSelectLabel){return 1}return a5.text==a4.text?0:a5.text<a4.text?-1:1}));a2.val(a3)}function l(a2,a4){var a3=a(document.createElement("div"));a3.append(ar(a4,"Select",""));a3.append(ap(a2,a4,"Select"));return a3}function ap(a3,a6,a5,a4){if(a5==undefined){a5="Select"}a6=a5+"_"+a6;var a2=a(document.createElement("select")).attr({id:a6,"data-role":"filterSetSelector"});if(a5=="Min"){a2.append(a(document.createElement("option")).text("No Min"))}if(a5=="Select"){a2.append(a(document.createElement("option")).text("All").prop("value",""))}if(a5=="MultiSelect"){a2.append(a(document.createElement("option")).text(aS.multiSelectLabel).prop("value",""))}a.each(a3,function(a8,a7){a2.append(a(document.createElement("option")).prop("value",a7).text(a7))});a2.change(function(a7){if(a4){a4(this)}aE()});if(a5=="Max"){a2.append(a(document.createElement("option")).attr({selected:true}).text("No Max"))}return a2}function ar(a4,a3,a2){return a(document.createElement("label")).attr({id:"selectLabel_"+a3+"_"+a4,"class":"selectLabel"}).text(a2)}function aZ(a8,a2,a7,a4){if(!aS.slidersEnabled){return a8}a7=a4+"_"+a7;var a3=(a4=="MaxMin")?2:1;var a6=a(document.createElement("div")).attr({id:"slider_"+a7,"class":"noUiSlider"});a6.noUiSlider("init",{handles:a3,scale:[0,a2.length],start:[0,a2.length],change:function(){var a9=a(this).noUiSlider("value");G(a7,a9);aK(a7,R(a7,a9))},end:function(){aE()}});var a5=a(document.createElement("div")).attr({id:"sliderLabel_"+a7,"class":"noUiSliderLabel"}).text("-");a8.append(a5);a8.append(a6);if(a4=="Min"){setTimeout(function(){aY(a7,0)},0)}if(a4=="Max"){setTimeout(function(){aY(a7,a2.length)},0)}if(a4=="MaxMin"){setTimeout(function(){aY(a7,a2.length)},0)}return a8}function G(a3,a2){if(utils.contains(a3,"MaxMin")){a3=a3.split("_")[1];a("select#Min_"+a3+" option:eq("+a2[0]+")").attr("selected","selected");a("select#Max_"+a3+" option:eq("+a2[1]+")").attr("selected","selected")}else{a("select#"+a3+" option:eq("+a2[1]+")").attr("selected","selected")}}function R(a6,a2){if(utils.contains(a6,"MaxMin")){a6=a6.split("_")[1];var a5=a("select#Min_"+a6+" option:eq("+a2[0]+")").text().trim();var a4=a("select#Max_"+a6+" option:eq("+a2[1]+")").text().trim();return F(a5,a4)}else{var a3=a("select#"+a6+" option:eq("+a2[1]+")").text();var a5=(utils.contains(a6,"Max"))?"No Min":a3;var a4=(utils.contains(a6,"Min"))?"No Max":a3;return F(a5,a4)}}function F(a3,a2){if(a3=="No Min"&&a2=="No Max"){return"Show All"}else{if(a2=="No Max"){return"From "+a3}else{if(a3=="No Min"){return"Up to "+a2}else{return a3+" to "+a2}}}}function aK(a3,a2){if(utils.exists("#sliderLabel_"+a3)){a("#sliderLabel_"+a3).text(a2)}}function aY(a4,a3){if(utils.exists("#slider_"+a4)){var a2=(utils.contains(a4,"MaxMin"))?"1":"0";a("#slider_"+a4).noUiSlider("move",{knob:a2,to:a3,surpressChange:true})}else{var a2=(utils.contains(a4,"Max"))?"1":"0";a4=a4.split("_")[1];if(utils.exists("#slider_MaxMin_"+a4)){a("#slider_MaxMin_"+a4).noUiSlider("move",{knob:a2,to:a3,surpressChange:true})}}}function au(a2,a3,a5){var a6=(a5)?"Checkboxes"+a5+"_"+a3:"Checkboxes_"+a3;var a4=a(document.createElement("ul")).attr({id:a6,"data-role":"filterSetSelector"});a4.append(aG("All",a3,true,function(){a.each(a("ul#"+a6+' input[type="checkbox"]'),function(a7,a8){W(a6,true);if(a7>0){a(a8).prop("checked",false)}});aE()}));a.each(a2,function(a8,a7){a4.append(aG(a7,a6,false,function(a9){W(a6,false);aE()}))});return a4}function W(a3,a2){a("ul#"+a3+' input[type="checkbox"]').eq(0).prop("checked",a2)}function aG(a4,a2,a3,a5){return a(document.createElement("li")).attr({"class":"checkboxLi"}).append(p(a4).prepend(aq(a4,a2,a3,a5)))}function aq(a4,a2,a3,a5){return a(document.createElement("input")).attr({id:a2+"_"+a4,"class":"filterCheckbox",name:a4,value:a4,type:"checkbox",checked:a3}).click(a5)}function p(a2){a2=utils.startsWith(a2,"~")?a2.substring(1):a2;return a(document.createElement("label")).text(a2)}function aF(){a(".paginationHolder").each(function(){a(this).empty().append(c())})}function c(){var a2=U();if(aS.pageSize>0&&a1.paging.numMatchedItems>a1.paging.itemsPerPage){aR(a2)}if(aS.pageSize>0){aL(a2)}return a2}function U(){var a5=((a1.paging.currentPage-1)*a1.paging.itemsPerPage)+1;var a4=((a1.paging.currentPage)*a1.paging.itemsPerPage);if(a4>a1.paging.numMatchedItems){a4=a1.paging.numMatchedItems}var a2=a(document.createElement("ul")).attr({"class":"pagination"});var a3="Showing ";if(aS.pageSize>0){a3+=a5+" - "+a4+" of "}a3+=a1.paging.numMatchedItems+" "+((a1.paging.numMatchedItems==1)?aS.itemLabel:aS.itemsLabel);if(a1.paging.numMatchedItems<a1.paging.totalItems){a3+="<span class='totalItems'> (filtered from "+a1.paging.totalItems+")</span>"}return a2.append(a(document.createElement("li")).attr({"class":"showing"}).html(a3))}function aL(a2){if(a1.paging.numMatchedItems>a1.paging.itemsPerPage){s(a2,"Show All",1,-1)}else{if(a1.paging.defaultItemsPerPage>0&&a1.paging.itemsPerPage>a1.paging.defaultItemsPerPage){s(a2,"First Page",1,a1.paging.defaultItemsPerPage)}}}function aR(a4){var a3=parseInt((a1.paging.numMatchedItems/a1.paging.itemsPerPage)+((a1.paging.numMatchedItems%a1.paging.itemsPerPage>0)?1:0));var a6=(a1.paging.currentPage>1)?a1.paging.currentPage-1:1;var a5=(a1.paging.currentPage<a3)?a1.paging.currentPage+1:a3;if(a5>a3){a5=a3}g(a4,"&laquo;","Skip to first page",1);g(a4,"&lsaquo;","Skip to previous page",a6);for(i=1;i<=a3;i++){var a2=a(document.createElement("li")).addClass("pageNumber");if(i==a1.paging.currentPage){a2.addClass("active")}a4.append(a2.append(a(document.createElement("a")).text(i).click(function(a7){f(a(this).text());ao()})))}g(a4,"&rsaquo;","Skip to next page",a5);g(a4,"&raquo;","Skip to last page",a3)}function s(a3,a5,a4,a2){a3.append(a(document.createElement("li")).append(a(document.createElement("a")).addClass("pagingShow").text(a5).click(function(a6){f(a4,a2);ao()})))}function g(a3,a5,a2,a4){a3.append(a(document.createElement("li")).prop("class","pageNumber").append(a(document.createElement("a")).click(function(a6){f(a4);ao()}).html(a5)))}function aX(a2){if(a.isNumeric(a2)){a2=parseInt(a2)+1}return a1.sort[a2]}function n(a3){var a2=a(document.createElement("select")).attr({id:"sortBySelect"});a2.append(a(document.createElement("option")).prop("value","sortBy").text("Sort by"));for(sortConfigIndex=0;sortConfigIndex<a3.length;sortConfigIndex++){var a5=a3[sortConfigIndex];if(a1.sort[a5.id]!=undefined){var a4=a5.id+"_"+a5.direction;a2.append(a(document.createElement("option")).prop("value",a4).text(a5.heading))}else{console.log("Sort function not defined for id '"+a5.id+"' so not adding '"+config.heading+"'' to sorting dropdown")}}a2.change(function(a7){var a6=a("select#sortBySelect>option:selected").val();if(a6!="sortBy"){x(a1.element,Y[a1.elementType].getAllDataFn(),a6.split("_")[0],a6.split("_")[1])}});aU("Sort by",a2,true)}function P(a2){var a3=1;a.each(a2,function(a4,a5){if(a5.isDefault){x(a1.element,Y[a1.elementType].getAllDataFn(),a5.id,a5.direction);a("#sortBySelect option:eq("+a3+")").attr("selected","selected")}a3++})}function I(){a("#tariffTable thead th").each(function(a2){if(aX(a2)){ah(a(this),a2)}})}function ah(a3,a2){if(!utils.contains(a3.attr("class"),"sorting")||utils.contains(a3.attr("class"),"sortable")){return}a3.addClass("sortable").click(function(){var a4=a("#tariffTable tbody tr").get();var a6=a3.is(".sorted-asc")?-1:1;x(a("#tariffTable tbody"),a4,a2,a6);a("th").removeClass("sorted-asc sorted-desc");var a5=a("th").filter(":nth-child("+(a2+1)+")");a6==1?a5.addClass("sorted-asc"):a5.addClass("sorted-desc");a("td").removeClass("sorted").filter(":nth-child("+(a2+1)+")").addClass("sorted")})}function x(a5,a3,a2,a4){o(a5,a3,a2,a4);f(1)}function o(a5,a3,a2,a4){a.each(a3,function(a7,a6){a6.sortKey=Y[a1.elementType].extractTextFn(a6,a2)});a3.sort(function(a7,a6){var a8=aX(a2);return a8(a7.sortKey,a6.sortKey,a4)});a.each(a3,function(a7,a6){a5.append(a6);a6.sortKey=null})}compare={sortItems:function(a2,a4,a3){if(a3==undefined){a3=1}if(typeof a4=="string"){a4=compare[a4]}a2.sort(function(a6,a5){return a4(a6,a5,a3)});return a2},compareAmount:function(a3,a2,a4){return compare.compare(compare.convertAmount(a3),compare.convertAmount(a2),a4)},comparePeriod:function(a3,a2,a4){return compare.compare(compare.convertPeriod(a3),compare.convertPeriod(a2),a4)},compareCurrency:function(a3,a2,a4){return compare.compare(parseFloat(utils.extractCurrencyValue(a3)),parseFloat(utils.extractCurrencyValue(a2)),a4)},compare:function(a3,a2,a4){if(!a4){a4=1}return((a3<a2)?-a4:((a3>a2)?a4:0))},strPad:function(a3,a2,a4){var a5=a3.toString().trim();if(!a4){a4="0"}while(a5.length<a2){a5=a4+a5}return a5},convertAmount:function(a2){var a2=a2.replace("GB","000000").replace("MB","000");if(!utils.containsNumber(a2)){a2=(a2=="Unlimited")?Number.MAX_VALUE:"0"}return compare.strPad(a2,10)},convertPeriod:function(a2){var a2=a2.toUpperCase().replace(" DAYS","").replace(" MONTHS","00");return compare.strPad(a2,10)}};utils={extractCurrencyValue:function(a3){if(a3==undefined){return""}var a2=a3.trim();if(a3.indexOf("£")!=-1){return utils.replaceAll(a2,"£","")}else{if(a2=="Free"||a2==""){return"0"}else{return a3}}},substringAfterLast:function(a3,a2){return(a3.indexOf(a2)>-1)?a3.substring(a3.lastIndexOf(a2)+1):""},contains:function(a2,a3){return(a2)&&a2.indexOf(a3)!=-1},exists:function(a2){return a(a2).length>0},now:function(){return new Date().getTime()},replaceAll:function(a2,a3,a4){return a2.replace(new RegExp(a3,"g"),a4)},startsWith:function(a2,a3){return a2.indexOf(a3)==0},containsNumber:function(a2){return/\d/.test(a2)},isAlphaNumeric:function(a2){return(a2.match(/^[0-9a-zA-Z ]+$/))?true:false},substringBeforeFirst:function(a4,a3){var a2=a4.indexOf(a3);return(a2>-1)?a4.substring(0,a2):a4},wrapFunctionWithLoading:function(a2,a3){if(a3){N();setTimeout(function(){var a5=utils.now();a2();var a4=utils.now()-a5;if(a4<aS.loadingMinTime){setTimeout(a0,aS.loadingMinTime-a4)}else{a0()}},1)}else{a2()}}};var y={"default":compare.compare,amount:compare.compareAmount,currency:compare.compareCurrency,period:compare.comparePeriod};var ag={select:l,multiSelect:D,checkboxes:au,min:X,max:ay,minMax:e,minWithBanding:ai,maxWithBanding:aD,rangeBanding:M};var Y={TABLE:{getAllDataFn:b,getAllDataForGivenIdFn:an,extractTextFn:q},UL:{getAllDataFn:aT,getAllDataForGivenIdFn:A,extractTextFn:ae}};if(methods[v]){return methods[v].apply(this,Array.prototype.slice.call(arguments,1))}else{if(utils[v]){return utils[v].apply(this,Array.prototype.slice.call(arguments,1))}else{if(compare[v]){return compare[v].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof v==="object"||!v){return methods.init.apply(this,arguments)}else{a.error("No such method: "+v)}}}}}})(jQuery);